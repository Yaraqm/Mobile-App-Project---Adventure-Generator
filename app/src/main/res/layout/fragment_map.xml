<?xml version="1.0" encoding="utf-8"?>
<!--
    This is the root layout for the map screen.
    ConstraintLayout is used because it is powerful for creating complex and responsive UIs.
    It allows us to layer views (like UI panels on top of a map) and define relationships
    between them, which is exactly what we need for this screen.
-->
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".fragments.MapFragment">

    <!--
        LAYER 1: The Map (Base Layer)

        This is the container for the Google Map.
        - It is placed as the first child so it acts as the base layer, occupying the entire screen.
        - `android:layout_width="0dp"` and `android:layout_height="0dp"` tell it to "match constraints".
        - By constraining it to all four sides of the parent, it expands to fill the whole area.
        - All other UI elements will be rendered on top of this map view.
    -->
    <androidx.fragment.app.FragmentContainerView
        android:id="@+id/map"
        android:name="com.google.android.gms.maps.SupportMapFragment"
        android:layout_width="0dp"
        android:layout_height="0dp"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent" />

    <!--
        LAYER 2: The UI Panel (Top Layer)

        This layout groups the search bar and filter chips into a single, cohesive UI panel.
        - It is placed after the map, so it renders on top of it.
        - `android:layout_width="0dp"` makes it span the full width of the screen.
        - `android:layout_height="wrap_content"` makes it only as tall as its contents (the search bar and chips).
        - `app:layout_constraintTop_toTopOf="parent"` anchors this entire panel to the top of the screen.
        - `android:elevation="4dp"` lifts the panel visually and gives it a subtle shadow, separating it from the map.
        - `android:background="?android:colorBackground"` gives it a solid background so the map doesn't show through.
    -->
    <androidx.constraintlayout.widget.ConstraintLayout
        android:id="@+id/ui_panel"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:background="@android:color/white"
        android:elevation="4dp"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent">

        <!--
            Child of UI Panel: The Search Bar
            - This view is for user text input to search for locations.
            - It's constrained to the top, start, and end of its parent (the `ui_panel`).
            - Margins provide spacing from the screen edges.
            - `app:queryHint` shows placeholder text.
            - The background is a custom drawable for rounded corners.
        -->
        <androidx.appcompat.widget.SearchView
            android:id="@+id/map_search_view"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginStart="16dp"
            android:layout_marginTop="16dp"
            android:layout_marginEnd="16dp"
            android:background="@drawable/search_view_background"
            app:iconifiedByDefault="false"
            android:fontFamily="@font/poppinssemibold"
            app:queryHint="Search for a location..."
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toTopOf="parent" />

        <!--
            Child of UI Panel: The Filter Chip Scroller
            - HorizontalScrollView allows the ChipGroup to be scrolled horizontally if there are
              too many categories.
            - `android:scrollbars="none"` hides the unsightly scrollbar.
            - It's constrained below the search bar and to the bottom of the `ui_panel`, completing the panel's layout.
        -->
        <HorizontalScrollView
            android:id="@+id/category_scroll_view"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:scrollbars="none"
            app:layout_constraintBottom_toBottomOf="parent"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toBottomOf="@id/map_search_view">

            <!--
                The ChipGroup holds the filter chips (e.g., "All", "Fitness").
                - `app:singleSelection="true"` ensures only one chip can be selected at a time.
                - Padding gives the chips some breathing room inside the scroller.
                - The actual Chip views are added dynamically from your Kotlin code.
            -->
            <com.google.android.material.chip.ChipGroup
                android:id="@+id/category_chip_group"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingStart="16dp"
                android:paddingTop="8dp"
                android:paddingEnd="16dp"
                android:paddingBottom="8dp"
                app:singleSelection="true">

                <!-- Chips will be added here dynamically from the code -->

            </com.google.android.material.chip.ChipGroup>
        </HorizontalScrollView>

    </androidx.constraintlayout.widget.ConstraintLayout>

</androidx.constraintlayout.widget.ConstraintLayout>
